---
name: Test
menu: Usage
route: /usage/test
---

import { Playground } from "docz";
import { useState } from 'react';
import { BoxGeometry, Color, Mesh, MeshLambertMaterial, SphereGeometry } from 'three';

import 'tippy.js/dist/tippy.css';
import 'tippy.js/animations/scale.css';

import ReactGlobe from "../../lib";
import defaultMarkers from './markers';

<Playground>
  {() => {
    function getRandomMarkers() {
      return defaultMarkers.map(marker => ({
        ...marker,
        tooltip: `Random number: ${Math.random().toFixed(3)}`
      }));
    }
    const [focus, setFocus] = useState(null);
    const [markers, setMarkers] = useState([]);
    const [options, setOptions] = useState();
    const [animationSequence, setAnimationSequence] = useState();
    let animations = [];
    switch (animationSequence) {
      case "singapore":
        animations = [
          {
            coordinates: [1.3521, 103.8198],
            focusAnimationDuration: 5000,
            focusDistanceRadiusScale: 2,
            focusEasingFunction: ["Linear", "None"]
          }
        ];
        break;
      case "world":
        animations = [
          {
            coordinates: [1.3521, 103.8198],
            focusAnimationDuration: 5000,
            focusDistanceRadiusScale: 2,
            focusEasingFunction: ["Linear", "None"]
          },
          {
            coordinates: [39.9042, 116.4074],
            focusAnimationDuration: 3000,
            focusDistanceRadiusScale: 2,
            focusEasingFunction: ["Cubic", "InOut"]
          },
          {
            coordinates: [37.773972, -122.431297],
            focusAnimationDuration: 3000,
            focusDistanceRadiusScale: 2,
            focusEasingFunction: ["Back", "InOut"]
          },
          {
            coordinates: [40.73061, -73.935242],
            focusAnimationDuration: 3000,
            focusDistanceRadiusScale: 2,
            focusEasingFunction: ["Circular", "InOut"]
          },
          {
            coordinates: [51.5074, 0.1278],
            focusAnimationDuration: 3000,
            focusDistanceRadiusScale: 2,
            focusEasingFunction: ["Quadratic", "InOut"]
          },
          {
            coordinates: [1.3521, 103.8198],
            focusAnimationDuration: 5000,
            focusDistanceRadiusScale: 4,
            focusEasingFunction: ["Linear", "None"]
          }
        ];
        break;
      default:
        animations = [];
    }
    const customOptions = {
      ambientLightColor: 'red',
      cameraAutoRotateSpeed: 0,
      enableCameraZoom: false,
      enableDefocus: false,
      enableGlobeClouds: false,
      focusAnimationDuration: 2000,
      focusDistanceRadiusScale: 2,
      globeGlowRadiusScale: 1,
      globeTexture: 'https://raw.githubusercontent.com/chrisrzhou/react-globe/main/textures/globe_dark.jpg',
      markerEnterAnimationDuration: 500,
      markerGlowPower: 10,
      markerRenderer: (marker) => {
        const { color, id, value } = marker
        const scaledSize = value / 3
        const geometry =
          id > 3
            ? new BoxGeometry(10, 10, scaledSize)
            : new SphereGeometry(scaledSize, 10, 10)
        const material = new MeshLambertMaterial({
          color: new Color(color),
        })
        return new Mesh(geometry, material);
      },
      markerTooltipRenderer: marker => marker.tooltip,
      markerType: 'dot',
      pointLightColor: 'gold',
      pointLightIntensity: 4,
    };
    return (
      <div>
        <button onClick={() => setOptions(undefined)}>
          default options
        </button>
        <button onClick={() => setOptions(customOptions)}>
          custom options
        </button>
        <hr />
          <button onClick={() => setFocus([1.3521, 103.8198])}>Singapore</button>
          <button onClick={() => setFocus([40.73061, -73.935242])}>
            New York
          </button>
          <button onClick={() => setFocus([37.773972, -122.431297])}>
            San Fransisco
          </button>
          <button onClick={() => setFocus(null)}>None</button>
        <hr />
        <button onClick={() => setMarkers(getRandomMarkers())}>
          Randomize markers
        </button>
        <button onClick={() => setMarkers([])}>Clear markers</button>
        <button
          disabled={markers.length === defaultMarkers.length}
          onClick={() =>
            setMarkers([...markers, getRandomMarkers()[markers.length]])
          }
        >
          Add marker
        </button>
        <button
          disabled={markers.length === 0}
          onClick={() => setMarkers(markers.slice(0, markers.length - 1))}
        >
          Remove marker
        </button>
        <hr />
        <button onClick={() => setAnimationSequence("singapore")}>
          Go to Singapore
        </button>
        <button onClick={() => setAnimationSequence("world")}>
          Travel the world
        </button>
        <ReactGlobe
          animations={animations}
          focus={focus}
          height="400px"
          markers={markers}
          width="100%"
          onClickMarker={(marker, markerObject, event) => console.log('clicked', marker.id, markerObject.id)}
          onMouseOutMarker={(marker, markerObject, event) => console.log('mouse out', marker.id, markerObject.id)}
          onMouseOverMarker={(marker, markerObject, event) => console.log('mouseover', marker.id, markerObject.id)}
          options={options}
        />
      </div>
    );
  }}
</Playground>
